---
import Layout from "@/layouts/Layout.astro";
import About from "@/components/sections/About.astro";
import Education from "@/components/sections/Education.astro";
import Experience from "@/components/sections/Experience.astro";
import Hero from "@/components/sections/Hero.astro";
import Projects from "@/components/sections/Projects.astro";
import Skills from "@/components/sections/Skills.astro";
import Certificates from "@/components/sections/Certificates.astro";
import Contact from "@/components/sections/Contact.astro";

import { basics } from "@cv";
const { name } = basics;

// Si tu componente Hero no incluye un <h1>, podrías definirlo aquí.
// const pageTitle = `${name} - ${label}`
---

<Layout>
  <!-- Indicador de progreso de lectura -->
  <div
    id="reading-progress-container"
    class="fixed top-0 left-0 w-full h-0.5 bg-fondo-secundario z-50"
  >
    <div id="reading-progress" class="h-full bg-azul-principal w-0 transition-all duration-100">
    </div>
  </div>

  <!-- Hero con la presentación principal -->
  <Hero />

  <main class="pb-16">
    <!-- Sección Sobre Mí -->
    <section id="sobre-mi">
      <About />
    </section>

    <!-- Experiencia laboral - Mantiene posición prioritaria -->
    <section id="experiencia">
      <Experience />
    </section>

    <!-- Proyectos - Movido más arriba para destacar tu trabajo práctico -->
    <section id="proyectos">
      <Projects />
    </section>

    <!-- Habilidades - Movido más arriba para complementar proyectos y experiencia -->
    <section id="habilidades">
      <Skills />
    </section>

    <!-- Certificados -->
    <section id="certificados">
      <Certificates />
    </section>

    <!-- Educación - Movida más abajo ya que la experiencia práctica suele ser más relevante -->
    <section id="educacion">
      <Education />
    </section>

    <!-- Contacto - Se mantiene al final como llamada a la acción -->
    <section id="contacto">
      <Contact />
    </section>
  </main>

  <footer class="bg-fondo-secundario pt-8 pb-2 text-center text-texto-desactivado text-sm">
    <div class="max-w-4xl mx-auto px-6">
      <p>&copy; {new Date().getFullYear()} {name}</p>
    </div>
  </footer>
</Layout>

<script>
  // Script para la barra de progreso de lectura
  document.addEventListener("DOMContentLoaded", () => {
    const progressBar = document.getElementById("reading-progress");
    if (progressBar) {
      function updateProgressBar() {
        const scrollPosition = window.scrollY;
        const totalHeight = document.body.scrollHeight - window.innerHeight;
        const progress = (scrollPosition / totalHeight) * 100;
        if (progressBar instanceof HTMLElement) {
          progressBar.style.width = `${progress}%`;
        }
      }

      // Actualizar en scroll y resize
      window.addEventListener("scroll", updateProgressBar);
      window.addEventListener("resize", updateProgressBar);

      // Actualizar al cargar la página
      updateProgressBar();
    }
  });
</script>
