---
/**
 * Hero.astro - Componente principal de encabezado del portfolio
 *
 * Características:
 * - Muestra información principal del perfil: nombre, título, ubicación
 * - Incluye enlaces a redes sociales y correo electrónico
 * - Implementa diseño responsivo centrado y limpio
 * - Separa el contenido para impresión y visualización web
 * - Diseño minimalista enfocado en el contenido textual
 */
import { basics } from "@cv";
import Section from "../Section.astro";
import {
  MailIcon as Mail,
  XIcon as X,
  LinkedInIcon as LinkedIn,
  GitHubIcon as GitHub,
  WorldMapIcon as WorldMap,
  BlogIcon as Blog,
  type SocialIcon,
} from "@/icons";

const { name, label, location, profiles, email, image, imageAlt } = basics;
const { city, region } = location;

const SOCIAL_ICONS: SocialIcon = {
  GitHub,
  LinkedIn,
  X,
};

const linkedInfo = profiles.find(({ network }) => network === "LinkedIn");
const linkedUrl = linkedInfo?.url;

const printInfo = [email, linkedUrl].filter(Boolean).join(" • ");
---

<Section class="pt-32 pb-20 text-center">
  <div class="flex flex-col items-center gap-s">
    <!-- ✅ PERFORMANCE: Profile image with lazy loading -->
    {
      image && (
        <div class="mb-s">
          <img
            src={image}
            alt={imageAlt}
            width="120"
            height="120"
            class="w-30 h-30 rounded-full border-4 border-borde-principal shadow-avatar object-cover"
            loading="eager"
            decoding="async"
          />
        </div>
      )
    }

    <h1 class="text-h1 font-bold text-texto-principal">{name}</h1>
    <h2
      class="text-h2 font-bold bg-gradient-to-r from-azul-principal to-cian-acento bg-clip-text text-transparent max-w-2xl"
    >
      {label}
    </h2>
    <span class="flex items-center gap-2 justify-center text-texto-desactivado text-body-lg">
      <WorldMap />
      {city}, {region}
    </span>
    <div class="print text-texto-desactivado text-lg">{printInfo}</div>

    <!-- Enlaces a redes sociales -->
    <nav class="no-print mt-m flex flex-wrap gap-s justify-center">
      {
        email && (
          <a
            href={`mailto:${email}`}
            title={`Enviar correo a ${name}`}
            class="bg-fondo-secundario text-texto-desactivado border border-borde-principal rounded-md p-3 transition-all duration-200 hover:bg-fondo-hover hover:text-texto-principal hover:scale-105 focus:outline-none focus:ring-2 focus:ring-azul-principal focus:ring-offset-2 focus:ring-offset-fondo-principal"
          >
            <Mail class="h-7 w-7" />
          </a>
        )
      }
      {
        profiles.map(({ network, url }) => {
          const Icon = SOCIAL_ICONS[network];
          return (
            <a
              href={url}
              title={`Visitar perfil de ${name} en ${network}`}
              target="_blank"
              rel="noopener noreferrer"
              class="bg-fondo-secundario text-texto-desactivado border border-borde-principal rounded-md p-3 transition-all duration-200 hover:bg-fondo-hover hover:text-texto-principal hover:scale-105 focus:outline-none focus:ring-2 focus:ring-azul-principal focus:ring-offset-2 focus:ring-offset-fondo-principal"
            >
              <Icon class="h-7 w-7" />
            </a>
          );
        })
      }
      <a
        href="https://blog.sergiomarquez.dev"
        title="Visitar mi blog"
        target="_blank"
        rel="noopener noreferrer"
        class="bg-fondo-secundario text-texto-desactivado border border-borde-principal rounded-md p-3 transition-all duration-200 hover:bg-fondo-hover hover:text-texto-principal hover:scale-105 focus:outline-none focus:ring-2 focus:ring-azul-principal focus:ring-offset-2 focus:ring-offset-fondo-principal"
      >
        <Blog class="h-7 w-7" />
      </a>
    </nav>
  </div>
</Section>

<style>
  /* ✅ PERFORMANCE: Optimized animations for 60fps */
  a {
    transform: translateZ(0); /* Force GPU acceleration */
    will-change: transform, background-color;
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    a {
      transition: none;
    }

    a:hover {
      transform: none;
    }
  }
</style>
