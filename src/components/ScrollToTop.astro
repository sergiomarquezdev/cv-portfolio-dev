---
// ScrollToTop.astro - Componente para volver al inicio de la página
---

<button
  id="scroll-to-top"
  class="fixed bottom-4 left-4 z-40 w-12 h-12 rounded-full bg-primary text-white shadow-lg flex items-center justify-center hover:bg-primary-dark transition-all duration-300 transform scale-0 opacity-0 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary dark:bg-primary-dark dark:hover:bg-primary"
  aria-label="Volver arriba"
  title="Volver arriba"
>
  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
  </svg>
</button>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const scrollToTopButton = document.getElementById('scroll-to-top');

    // Función para verificar la posición del scroll y mostrar/ocultar el botón
    function toggleScrollToTopButton() {
      // Calcular la altura total del documento
      const scrollHeight = document.documentElement.scrollHeight;
      const clientHeight = document.documentElement.clientHeight;
      const scrollY = window.scrollY;

      // Calcular el porcentaje de scroll (0-100)
      const scrollPercentage = (scrollY / (scrollHeight - clientHeight)) * 100;

      // Mostrar el botón cuando el usuario ha scrolleado más del 70% de la página
      if (scrollPercentage > 70) {
        scrollToTopButton?.classList.remove('scale-0', 'opacity-0');
        scrollToTopButton?.classList.add('scale-100', 'opacity-100');
      } else {
        scrollToTopButton?.classList.remove('scale-100', 'opacity-100');
        scrollToTopButton?.classList.add('scale-0', 'opacity-0');
      }
    }

    // Función para volver al inicio de la página
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // Agregar event listeners
    window.addEventListener('scroll', toggleScrollToTopButton);
    scrollToTopButton?.addEventListener('click', scrollToTop);

    // Verificar la posición inicial del scroll
    toggleScrollToTopButton();
  });
</script>
